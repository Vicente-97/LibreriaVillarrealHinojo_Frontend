"use strict";(self.webpackChunkLibreriaVillarrealVicente=self.webpackChunkLibreriaVillarrealVicente||[]).push([[59],{7059:(Ut,q,s)=>{s.r(q),s.d(q,{BooksModule:()=>h});var p=s(6895),l=s(7825),n=s(433),S=s(5226),c=s.n(S),t=s(8256),g=s(7146),C=s(5137),B=s(41),F=s(9198),b=s(4696),f=s(5227);function M(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," must be a valid ISBN, it must be a Isbn of more than 5 letters "),t.qZA())}function j(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," It must be a title of more than 5 letters and unique "),t.qZA())}function N(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," Date is required! "),t.qZA())}function P(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," Author is required! "),t.qZA())}function Q(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," The price must be greater than 5 "),t.qZA())}function Y(i,e){1&i&&(t.TgZ(0,"span",26),t._uU(1," The stock must be greater than 5 "),t.qZA())}function D(i,e){if(1&i&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&i){const o=e.$implicit;t.Q6J("value",o.name),t.xp6(1),t.hij(" ",o.name," ")}}const V=function(){return["/books/list"]};class _{constructor(e,o,r,a,d,y){this.fb=e,this.router=o,this.servicio=r,this.servicioCat=a,this.servicioUser=d,this.bookshopservice=y,this.categories=[],this.Bookshop=[],this.librerias=[],this.json={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:""},this.myForm=this.fb.group({isbn:["",[n.kI.required,n.kI.minLength(5)]],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]],opcionSeleccionado:["",[n.kI.required]],fotoPerfil:["",[n.kI.required]],fileSource:["",[n.kI.required]]})}ngOnInit(){this.servicioCat.getCategories().subscribe({next:e=>{this.categories=e},error:e=>{console.log(e)}})}isValidField(e){return this.myForm?.controls[e].errors&&this.myForm?.controls[e].touched&&this.myForm?.controls[e].invalid}saveAdd(){this.json.isbn=this.myForm.get("isbn")?.value,this.json.title=this.myForm.get("title")?.value,this.json.dateBook=this.myForm.get("date")?.value,this.json.author=this.myForm.get("author")?.value,this.json.price=this.myForm.get("price")?.value,this.json.stock=this.myForm.get("stock")?.value,this.servicioCat.getCategoryId(this.myForm.get("opcionSeleccionado")?.value).subscribe({next:e=>{this.category=e,this.json.category=this.category,this.servicio.addBook(this.json,this.myForm.get("fileSource")?.value).subscribe({next:o=>{o&&(this.myForm.reset(),c().fire({icon:"success",title:"Book successfully added",text:"\xa1Book added!"}),this.router.navigate(["/books/list"]))},error:o=>{c().fire({icon:"error",title:"Oops...",text:"Something has gone wrong!"}),this.router.navigate(["/"])}})}})}agregarLibreria(){this.librerias.push(this.myForm.get("libreria")?.value),console.log(this.librerias)}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}onFileChange(e){console.log(e),e.target.files.length>0&&this.myForm.patchValue({fileSource:e.target.files[0]})}}_.\u0275fac=function(e){return new(e||_)(t.Y36(n.qu),t.Y36(l.F0),t.Y36(g.y),t.Y36(C.H),t.Y36(B.K),t.Y36(F.k))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-add-book"]],decls:87,vars:11,consts:[[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],[1,"titulo"],["action","#","enctype","multipart/form-data",1,"form",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","formControlName","isbn",1,"form-control"],[1,"fa","fa-user","form-control-feedback"],["class","form-text text-danger",4,"ngIf"],["type","text","placeholder","title","formControlName","title",1,"form-control"],["type","date","placeholder","Date Book","formControlName","date",1,"form-control"],["type","text","placeholder","Author","formControlName","author",1,"form-control"],["type","number","placeholder","price","formControlName","price",1,"form-control"],["type","number","placeholder","Stock","formControlName","stock",1,"form-control"],["name","opcionSeleccionado","aria-labelledby","state","aria-label","State","formControlName","opcionSeleccionado"],[3,"value",4,"ngFor","ngForOf"],["type","file","placeholder","Photo","formControlName","fotoPerfil","name","fotoPerfil",1,"form-control",3,"change"],[1,"fa","fa-lock","form-control-feedback"],["align","right"],["type","submit",1,"btn","btn-primary","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"form-text","text-danger"],[3,"value"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),t._uU(7,"Add Book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return o.saveAdd()}),t.TgZ(9,"div",7)(10,"div",2)(11,"div",8)(12,"p",9),t._uU(13,"Isbn"),t.qZA()(),t.TgZ(14,"div",10),t._UZ(15,"input",11)(16,"i",12),t.YNc(17,M,2,0,"span",13),t.qZA()(),t._UZ(18,"hr"),t.TgZ(19,"div",2)(20,"div",8)(21,"p",9),t._uU(22,"Tittle:"),t.qZA()(),t.TgZ(23,"div",10),t._UZ(24,"input",14)(25,"i",12),t.YNc(26,j,2,0,"span",13),t.qZA()(),t._UZ(27,"hr"),t.TgZ(28,"div",2)(29,"div",8)(30,"p",9),t._uU(31,"Date:"),t.qZA()(),t.TgZ(32,"div",10),t._UZ(33,"input",15)(34,"i",12),t.YNc(35,N,2,0,"span",13),t.qZA()(),t._UZ(36,"hr"),t.TgZ(37,"div",2)(38,"div",8)(39,"p",9),t._uU(40,"Author:"),t.qZA()(),t.TgZ(41,"div",10),t._UZ(42,"input",16)(43,"i",12),t.YNc(44,P,2,0,"span",13),t.qZA()(),t._UZ(45,"hr"),t.TgZ(46,"div",2)(47,"div",8)(48,"p",9),t._uU(49,"Price:"),t.qZA()(),t.TgZ(50,"div",10),t._UZ(51,"input",17)(52,"i",12),t.YNc(53,Q,2,0,"span",13),t.qZA()(),t._UZ(54,"hr"),t.TgZ(55,"div",2)(56,"div",8)(57,"p",9),t._uU(58,"Stock:"),t.qZA()(),t.TgZ(59,"div",10),t._UZ(60,"input",18)(61,"i",12),t.YNc(62,Y,2,0,"span",13),t.qZA(),t._UZ(63,"hr"),t.TgZ(64,"div",2)(65,"div",8)(66,"p",9),t._uU(67,"Category:"),t.qZA()(),t.TgZ(68,"div",10)(69,"select",19),t.YNc(70,D,2,2,"option",20),t.qZA()()(),t._UZ(71,"hr")(72,"div",2)(73,"hr"),t.TgZ(74,"div",2)(75,"div",8)(76,"p",9),t._uU(77,"Picture:"),t.qZA()(),t.TgZ(78,"div",10)(79,"input",21),t.NdJ("change",function(a){return o.onFileChange(a)}),t.qZA(),t._UZ(80,"i",22),t.qZA()(),t.TgZ(81,"div",23)(82,"button",24),t._uU(83,"Add Book"),t.qZA(),t.TgZ(84,"button",25),t._uU(85,"Back"),t.qZA()()()()()()()()()(),t._UZ(86,"app-footer")),2&e&&(t.xp6(8),t.Q6J("formGroup",o.myForm),t.xp6(9),t.Q6J("ngIf",o.isValidField("isbn")),t.xp6(9),t.Q6J("ngIf",o.isValidField("title")),t.xp6(9),t.Q6J("ngIf",o.isValidField("date")),t.xp6(9),t.Q6J("ngIf",o.isValidField("author")),t.xp6(9),t.Q6J("ngIf",o.isValidField("price")),t.xp6(9),t.Q6J("ngIf",o.isValidField("stock")),t.xp6(8),t.Q6J("ngForOf",o.categories),t.xp6(12),t.Q6J("disabled",o.myForm.invalid),t.xp6(2),t.Q6J("routerLink",t.DdM(10,V)))},dependencies:[p.sg,p.O5,b.S,f.c,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,l.rH,l.Od,n.sg,n.u],styles:["#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}.titulo[_ngcontent-%COMP%]{padding-left:1em}"]});const z=function(){return["/books/list"]};class v{constructor(e,o,r,a,d){this.route=e,this.servicio=o,this.servicioCat=r,this.fb=a,this.routes=d,this.book={},this.category={},this.myForm=this.fb.group({isbn:["",[n.kI.required,n.kI.minLength(3)]],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]]})}ngOnInit(){this.servicio.getBook(this.route.snapshot.params.id).subscribe({next:o=>{this.book=o,this.servicioCat.getCategoryId(this.book.category.name).subscribe({next:r=>{this.category=r,console.log(this.category)}})}})}saveDelete(){this.servicio.deletBook(this.book.isbn).subscribe({next:e=>{e&&(this.myForm.reset(),c().fire({icon:"success",title:" Book Deleted",text:"\xa1sucess Book Deleted!"}),this.routes.navigate(["/books/list"]))},error:e=>{c().fire({icon:"error",title:"Oops...",text:"Cant delete Book"})}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}}v.\u0275fac=function(e){return new(e||v)(t.Y36(l.gz),t.Y36(g.y),t.Y36(C.H),t.Y36(n.qu),t.Y36(l.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-delete-book"]],decls:73,vars:12,consts:[["id","navbar"],[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],["action","#",1,"form",3,"formGroup","ngSubmit"],["align","center",1,"form-group"],["for","input2"],["alt","avatar",1,"rounded-circle","img-fluid","imgRedonda",3,"src"],[1,"form-group"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","formControlName","isbn","readonly","",1,"form-control",3,"value"],["type","text","placeholder","title","formControlName","title","readonly","",1,"form-control",3,"value"],["type","date","placeholder","Date Book","formControlName","date","readonly","",1,"form-control",3,"value"],[1,"fa","fa-user","form-control-feedback"],["type","text","placeholder","Author","formControlName","author","readonly","",1,"form-control",3,"value"],["type","number","placeholder","price","formControlName","price","readonly","",1,"form-control",3,"value"],["type","number","placeholder","Stock","formControlName","stock","readonly","",1,"form-control",3,"value"],["type","text","formControlName","stock","readonly","",1,"form-control",3,"value"],["align","right"],["type","submit",1,"btn","btn-danger","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-primary",3,"routerLink"],["id","footer"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),t._uU(7,"Delete Book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return o.saveDelete()}),t.TgZ(9,"div",7),t._UZ(10,"label",8)(11,"img",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",3)(15,"div",12)(16,"p",13),t._uU(17,"Isbn:"),t.qZA()(),t.TgZ(18,"div",14),t._UZ(19,"input",15),t.qZA()(),t._UZ(20,"hr"),t.TgZ(21,"div",3)(22,"div",12)(23,"p",13),t._uU(24,"Title:"),t.qZA()(),t.TgZ(25,"div",14),t._UZ(26,"input",16),t.qZA()(),t._UZ(27,"hr"),t.TgZ(28,"div",3)(29,"div",12)(30,"p",13),t._uU(31,"Date:"),t.qZA()(),t.TgZ(32,"div",14),t._UZ(33,"input",17)(34,"i",18),t.qZA()(),t._UZ(35,"hr"),t.TgZ(36,"div",3)(37,"div",12)(38,"p",13),t._uU(39,"Author:"),t.qZA()(),t.TgZ(40,"div",14),t._UZ(41,"input",19)(42,"i",18),t.qZA()(),t._UZ(43,"hr"),t.TgZ(44,"div",3)(45,"div",12)(46,"p",13),t._uU(47,"Price:"),t.qZA()(),t.TgZ(48,"div",14),t._UZ(49,"input",20)(50,"i",18),t.qZA()(),t._UZ(51,"hr"),t.TgZ(52,"div",3)(53,"div",12)(54,"p",13),t._uU(55,"Stock:"),t.qZA()(),t.TgZ(56,"div",14),t._UZ(57,"input",21)(58,"i",18),t.qZA()(),t._UZ(59,"hr"),t.TgZ(60,"div",3)(61,"div",12)(62,"p",13),t._uU(63,"Category:"),t.qZA()(),t.TgZ(64,"div",14),t._UZ(65,"input",22)(66,"i",18),t.qZA()(),t.TgZ(67,"div",23)(68,"button",24),t._uU(69,"Delete Book"),t.qZA(),t.TgZ(70,"button",25),t._uU(71,"Back"),t.qZA()()()()()()()()()(),t._UZ(72,"app-footer",26)),2&e&&(t.xp6(8),t.Q6J("formGroup",o.myForm),t.xp6(3),t.s9C("src",o.book.img,t.LSH),t.xp6(8),t.Q6J("value",o.book.isbn),t.xp6(7),t.Q6J("value",o.book.title),t.xp6(7),t.Q6J("value",o.book.dateBook),t.xp6(8),t.Q6J("value",o.book.author),t.xp6(8),t.Q6J("value",o.book.price),t.xp6(8),t.Q6J("value",o.book.stock),t.xp6(8),t.Q6J("value",o.category.name),t.xp6(3),t.Q6J("disabled",o.save()),t.xp6(2),t.Q6J("routerLink",t.DdM(11,z)))},dependencies:[b.S,f.c,n._Y,n.Fj,n.wV,n.JJ,n.JL,l.rH,l.Od,n.sg,n.u],styles:[".imgRedonda[_ngcontent-%COMP%]{width:120px;height:125px;border-radius:100px}#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}"]});var u=s(7340),w=s(6217),I=s(9298),T=s(7318),H=s(805),U=s(5593),O=s(1740);function $(i,e){1&i&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2,"Isbn"),t._UZ(3,"p-sortIcon",16),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Imagen"),t.qZA(),t.TgZ(6,"th",17),t._uU(7,"Title"),t._UZ(8,"p-sortIcon",18),t.qZA(),t.TgZ(9,"th"),t._uU(10,"dateBook"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"Author"),t._UZ(13,"p-sortIcon",20),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Category"),t.qZA(),t.TgZ(16,"th",21),t._uU(17,"Price"),t._UZ(18,"p-sortIcon",22),t.qZA(),t.TgZ(19,"th"),t._uU(20,"stock"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Bookshop Avaible"),t.qZA()())}function R(i,e){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br")(3,"hr"),t.qZA()),2&i){const o=e.$implicit;t.xp6(1),t.hij("",o.name.name," ")}}const E=function(i){return["/books/updateBook/",i]};function G(i,e){if(1&i&&(t.TgZ(0,"button",31),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",33),t.qZA(),t._uU(3," \xa0Edit \xa0"),t.qZA()),2&i){const o=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,E,o.isbn))}}const K=function(i){return["/books/deleteBook/",i]};function X(i,e){if(1&i&&(t.TgZ(0,"button",34),t.O4$(),t.TgZ(1,"svg",35),t._UZ(2,"path",36),t.qZA(),t._uU(3," \xa0 Delete \xa0"),t.qZA()),2&i){const o=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,K,o.isbn))}}function W(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.addToCart(a))}),t.O4$(),t.TgZ(1,"svg",38),t._UZ(2,"path",39),t.qZA(),t._uU(3," \xa0 Add to Cart\xa0"),t.qZA()}}function tt(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.addToFavorite(a))}),t.O4$(),t.TgZ(1,"svg",41),t._UZ(2,"path",42),t.qZA(),t._uU(3," \xa0 Add to favorite \xa0"),t.qZA()}}function ot(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.deleteFavorite(a.isbn))}),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"path",45),t.qZA(),t._uU(3," \xa0 delete Favorite \xa0"),t.qZA()}}function et(i,e){if(1&i&&(t.TgZ(0,"tr")(1,"td",23),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._UZ(4,"img",24),t.qZA(),t.TgZ(5,"td",23),t._uU(6),t.qZA(),t.TgZ(7,"td",23),t._uU(8),t.qZA(),t.TgZ(9,"td",23),t._uU(10),t.qZA(),t.TgZ(11,"td",23),t._uU(12),t.qZA(),t.TgZ(13,"td",23),t._uU(14),t.qZA(),t.TgZ(15,"td",23),t._uU(16),t.qZA(),t.TgZ(17,"td"),t.YNc(18,R,4,1,"span",25),t.qZA(),t.TgZ(19,"td"),t.YNc(20,G,4,3,"button",26),t._uU(21," \xa0 "),t.YNc(22,X,4,3,"button",27),t._uU(23," \xa0 "),t.YNc(24,W,4,0,"button",28),t.YNc(25,tt,4,0,"button",29),t.YNc(26,ot,4,0,"button",30),t.qZA()()),2&i){const o=e.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(o.isbn),t.xp6(2),t.Q6J("src",o.img,t.LSH),t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.dateBook),t.xp6(2),t.Oqu(o.author),t.xp6(2),t.Oqu(o.category.name),t.xp6(2),t.Oqu(o.price),t.xp6(2),t.Oqu(o.stock),t.xp6(2),t.Q6J("ngForOf",o.listAvaible),t.xp6(2),t.Q6J("ngIf",r.isAdmin),t.xp6(2),t.Q6J("ngIf",r.isAdmin),t.xp6(2),t.Q6J("ngIf","0"!=o.stock&&0==r.isAdmin&&null!=r.jwt),t.xp6(1),t.Q6J("ngIf","0"!=o.stock&&0==r.isAdmin&&null!=r.jwt),t.xp6(1),t.Q6J("ngIf","0"!=o.stock&&0==r.isAdmin&&null!=r.jwt)}}const it=function(){return[10,20]};function nt(i,e){if(1&i&&(t.TgZ(0,"p-table",11,12),t.YNc(2,$,23,0,"ng-template",13),t.YNc(3,et,27,14,"ng-template",14),t.qZA()),2&i){const o=t.oxw();t.Q6J("value",o.books)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,it))}}class Z{constructor(e,o,r,a){this.bookServ=e,this.shopping=o,this.servicio=r,this.route=a,this.isAdmin=!1,this.jwt=null,this.books=[],this.booksFullDatos=[],this.Bookshop=[],this.isbn=null,this.username=localStorage.getItem("username"),this.addedFav=!1,this.librosFavoritos=[]}addToCart(e){this.shopping.agregarAlCarrito(e),window.sessionStorage.setItem("carrito",JSON.stringify(this.shopping.books)),c().fire({icon:"success",title:"Art\xedculo a\xf1adido",text:"Art\xedculo a\xf1adido"})}filtrar(){this.books=0!=this.filtroNombre.trim().length?this.books.filter(e=>e.title.toLowerCase().includes(this.filtroNombre.toLowerCase())):this.booksFullDatos}ngOnInit(){this.getBooks(),this.jwt=localStorage.getItem("jwt"),this.jwt&&(this.isAdmin=this.servicio.isUserAdmin(this.jwt))}a\u00f1adido(e){null!=this.username&&this.bookServ.getFavoriteUser(this.username).subscribe({next:o=>{this.librosFavoritos=o,this.librosFavoritos.forEach(r=>{this.books.forEach(a=>{a==a&&(this.addedFav=!0)})})}})}getBooks(){this.bookServ.getBooks().subscribe({next:e=>{this.books=e,this.booksFullDatos=e}})}onSelect({selected:e}){this.selected.splice(0,this.selected.length),this.selected.push(...e)}onActivate(e){console.log(e)}addToFavorite(e){this.username=localStorage.getItem("username"),null!=this.username&&this.bookServ.addToFavoriteBook(e,this.username).subscribe({next:o=>{this.addedFav=!0,c().fire({icon:"success",title:"Favorite add",text:"\xa1Favorite added!"}),this.route.navigate(["/favorites/list"])},error:o=>{c().fire({icon:"error",title:"Oops...",text:"Favorito ya esta a\xf1adido!"}),this.route.navigate(["/favorites/list"])}})}deleteFavorite(e){this.username=localStorage.getItem("username"),null!=this.username&&this.bookServ.deleteFavoriteBook(e,this.username).subscribe({next:o=>{c().fire({icon:"success",title:"Favorite deleted",text:"\xa1Favorite deleted!"}),this.route.navigate(["/favorites/list"])},error:o=>{c().fire({icon:"error",title:"Oops...",text:"Favorito ya esta eliminado!"}),this.route.navigate(["/favorites/list"])}})}}function rt(i,e){1&i&&(t.TgZ(0,"span",34),t._uU(1," Debe de ser un titulo de m\xe1s de 5 letras y unico. "),t.qZA())}function at(i,e){1&i&&(t.TgZ(0,"span",34),t._uU(1," La fecha es requerida. "),t.qZA())}function st(i,e){1&i&&(t.TgZ(0,"span",34),t._uU(1," El campo author es requerido. "),t.qZA())}function lt(i,e){1&i&&(t.TgZ(0,"span",34),t._uU(1," el precio debe de ser mayor de 5 "),t.qZA())}function ct(i,e){1&i&&(t.TgZ(0,"span",34),t._uU(1," Debe de tener un stock mayor que 5 "),t.qZA())}function dt(i,e){if(1&i&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&i){const o=e.$implicit;t.Q6J("value",o.name),t.xp6(1),t.hij(" ",o.name," ")}}function pt(i,e){if(1&i&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&i){const o=e.$implicit;t.Q6J("value",o.name),t.xp6(1),t.hij(" ",o.name," ")}}function ut(i,e){if(1&i&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&i){const o=e.$implicit;t.Q6J("value",o.name.name),t.xp6(1),t.hij(" ",o.name.name," ")}}function mt(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"div",29)(1,"h4"),t._uU(2,"Delete Bookshop:"),t.qZA(),t.TgZ(3,"h6"),t._uU(4,"Borra librerias fisicas al libro"),t.qZA(),t.TgZ(5,"form",30),t.NdJ("ngSubmit",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.deleteBookshop())}),t.TgZ(6,"div",13)(7,"select",31),t.YNc(8,ut,2,2,"option",23),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"button",32),t._uU(11,"delete Bookshop"),t.qZA()()()}if(2&i){const o=t.oxw();t.xp6(5),t.Q6J("formGroup",o.bookshopForm),t.xp6(3),t.Q6J("ngForOf",o.book.listAvaible)}}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(g.y),t.Y36(w.F),t.Y36(I.e),t.Y36(l.F0))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-list"]],decls:18,vars:2,consts:[[1,"container-fluid"],[1,"col"],[1,"row"],[1,"col-md-6"],[1,"m-4"],[1,"row","d-flex","justify-content-center","w-100"],[1,"col-6"],["align","right",1,"col-6","mb-4"],["pInputText","","placeholder","Search a title....",3,"ngModel","ngModelChange","keydown.enter"],["pButton","",3,"click"],["aria-label","Tabla de datos con informaci\xf3n de productos","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","class","my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],["aria-label","Tabla de datos con informaci\xf3n de productos","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",1,"my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","isbn",1,"text-center"],["field","isbn"],["pSortableColumn","title",1,"text-center"],["field","title"],["pSortableColumn","author",1,"text-center"],["field","author"],["pSortableColumn","price",1,"text-center"],["field","price"],[1,"text-center"],["width","120","height","120","alt","imagenBook",3,"src"],[4,"ngFor","ngForOf"],["pButton","","icon","pi pi-pencil","aria-label","boton","aria-labelledby","boton","title","boton","class","btn btn-primary","href","#",3,"routerLink",4,"ngIf"],["pButton","","class","btn btn-danger botonRojo","href","#",3,"routerLink",4,"ngIf"],["pButton","","class","btn btn-danger botonAmarillo text-white ","href","#",3,"click",4,"ngIf"],["pButton","","class","btn btn-danger botonAddFav text-white ","href","#",3,"click",4,"ngIf"],["pButton","","class","btn btn-danger botonRojo text-white ","href","#",3,"click",4,"ngIf"],["pButton","","icon","pi pi-pencil","aria-label","boton","aria-labelledby","boton","title","boton","href","#",1,"btn","btn-primary",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],["pButton","","href","#",1,"btn","btn-danger","botonRojo",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3-fill"],["d","M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"],["pButton","","href","#",1,"btn","btn-danger","botonAmarillo","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cart-check-fill"],["d","M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1.646-7.646-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8 8.293l2.646-2.647a.5.5 0 0 1 .708.708z"],["pButton","","href","#",1,"btn","btn-danger","botonAddFav","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-through-heart-fill"],["d","M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l3.103-3.104a.5.5 0 1 1 .708.708L4.5 12.207V14a.5.5 0 0 1-.146.354l-1.5 1.5ZM16 3.5a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182A23.825 23.825 0 0 1 5.8 12.323L8.31 9.81a1.5 1.5 0 0 0-2.122-2.122L3.657 10.22a8.827 8.827 0 0 1-1.039-1.57c-.798-1.576-.775-2.997-.213-4.093C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5v3Z"],["pButton","","href","#",1,"btn","btn-danger","botonRojo","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-hand-thumbs-down"],["d","M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),t._uU(6,"Book List"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",2),t._UZ(9,"div",6),t.TgZ(10,"div",7)(11,"h5"),t._uU(12,"Filtering by title: "),t.qZA(),t.TgZ(13,"input",8),t.NdJ("ngModelChange",function(a){return o.filtroNombre=a})("keydown.enter",function(){return o.filtrar()}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return o.filtrar()}),t._uU(15,"Filtrar"),t.qZA()()(),t.YNc(16,nt,4,6,"p-table",10),t.qZA()()(),t._UZ(17,"app-footer")),2&e&&(t.xp6(13),t.Q6J("ngModel",o.filtroNombre),t.xp6(3),t.Q6J("ngIf",o.books))},dependencies:[p.sg,p.O5,b.S,f.c,T.iA,H.jx,T.lQ,T.fz,U.Hq,n.Fj,n.JJ,n.On,l.rH,O.o],styles:["table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-collapse:collapse}.botonRojo[_ngcontent-%COMP%]{background-color:red}.botonAmarillo[_ngcontent-%COMP%]{background-color:#2216c5}.botonAddFav[_ngcontent-%COMP%]{background-color:#4eaf27}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:8px}th[_ngcontent-%COMP%]{background-color:#ddd}@media (max-width: 600px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{display:block;border:none;text-align:left}td[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd;position:relative;text-align:center}td[_ngcontent-%COMP%]:before{position:absolute;left:0;top:0;width:50%;padding-right:10px;white-space:nowrap;content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}p-datatable.beatDatatable[_ngcontent-%COMP%]   .ui-datatable[_ngcontent-%COMP%]   .ui-datatable-thead[_ngcontent-%COMP%]   .ui-state-default[_ngcontent-%COMP%]{color:#000!important;line-height:2!important;text-align:center!important}.some-custom-class-name[_ngcontent-%COMP%]  th{background-color:#00f!important}}"],data:{animation:[(0,u.X$)("agregarProducto",[(0,u.SB)("void",(0,u.oB)({transform:"scale(0)"})),(0,u.eR)(":enter",[(0,u.jt)("0.2s ease-out",(0,u.oB)({transform:"scale(1.2)"})),(0,u.jt)("0.2s",(0,u.oB)({transform:"scale(1)"}))])])]}});const ht=function(){return["/books/list"]};class k{constructor(e,o,r,a,d,y,Ct){this.route=e,this.fb=o,this.router=r,this.servicio=a,this.servicioCat=d,this.servicioUser=y,this.bookshopSer=Ct,this.categories=[],this.book={},this.Bookshop=[],this.jsonLibrari={name:"",location:"",description:"",img:""},this.json={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:""},this.jsonBook={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:""},this.myForm=this.fb.group({isbn:[""],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]],opcionSeleccionado:["",[n.kI.required]],fotoPerfil:["",[n.kI.required]],fileSource:["",[n.kI.required]]}),this.bookshopForm=this.fb.group({libreria:["",[n.kI.required]]})}ngOnInit(){this.servicioCat.getCategories().subscribe({next:o=>{this.categories=o},error:o=>{console.log(o)}}),this.servicio.getBook(this.route.snapshot.params.id).subscribe({next:o=>{this.book=o}}),this.bookshopSer.getShop().subscribe({next:o=>{this.Bookshop=o}})}isValidField(e){return this.myForm?.controls[e].errors&&this.myForm?.controls[e].touched&&this.myForm?.controls[e].invalid}saveUpdate(){this.json.isbn=this.book.isbn,this.json.title=this.myForm.get("title")?.value,this.json.dateBook=this.myForm.get("date")?.value,this.json.author=this.myForm.get("author")?.value,this.json.price=this.myForm.get("price")?.value,this.json.stock=this.myForm.get("stock")?.value,this.servicioCat.getCategoryId(this.myForm.get("opcionSeleccionado")?.value).subscribe({next:e=>{this.category=e,this.json.category=this.category,this.servicio.updateBook(this.book.isbn,this.json,this.myForm.get("fileSource")?.value).subscribe({next:o=>{o&&(this.myForm.reset(),c().fire({icon:"success",title:"Libro Actualizado con \xe9xito",text:"\xa1Libro Actualizado!"})),this.router.navigate(["/books/list"])},error:o=>{c().fire({icon:"error",title:"Oops...",text:"El libro no se puede Actualizar."})}})},error:e=>{c().fire({icon:"error",title:"Oops...",text:"El libro no se puede Actualizar."})}})}addBookshop(){this.jsonBook.isbn=this.book.isbn,this.jsonBook.title=this.book.title,this.jsonBook.dateBook=this.book.dateBook,this.jsonBook.author=this.book.author,this.jsonBook.price=this.book.price,this.jsonBook.stock=this.book.stock,this.jsonBook.category=this.book.category,this.jsonBook.img=this.book.img,this.jsonBook.listAvaible=this.book.listAvaible,console.log(this.jsonBook),console.log(this.bookshopForm.get("libreria")?.value),this.servicio.getBookShop(this.bookshopForm.get("libreria")?.value).subscribe({next:e=>{this.shop=e,this.jsonLibrari.name=this.shop.name,this.jsonLibrari.location=this.shop.location,this.jsonLibrari.description=this.shop.description,this.jsonLibrari.img=this.shop.img,console.log(this.jsonLibrari),this.servicio.putBookshop(this.jsonBook,this.jsonLibrari).subscribe({next:o=>{o&&(this.myForm.reset(),c().fire({icon:"success",title:"Librerias Actualizadas con \xe9xito",text:"\xa1Librerias actualizadas!"}),this.router.navigate(["/books/list"]))}})}})}listlenght(){0==this.book.listAvaible.size()&&(this.longitud=!0)}deleteBookshop(){this.servicio.deleteBookshop(this.book.isbn,this.bookshopForm.get("libreria")?.value).subscribe({next:e=>{e&&(this.myForm.reset(),c().fire({icon:"success",title:"Libreria borrada con \xe9xito",text:"\xa1Libreria borrada!"})),this.router.navigate(["/books/list"])}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}onFileChange(e){console.log(e),e.target.files.length>0&&this.myForm.patchValue({fileSource:e.target.files[0]})}}k.\u0275fac=function(e){return new(e||k)(t.Y36(l.gz),t.Y36(n.qu),t.Y36(l.F0),t.Y36(g.y),t.Y36(C.H),t.Y36(B.K),t.Y36(F.k))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-update-book"]],decls:104,vars:20,consts:[[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],[1,"titulo"],["action","#","enctype","multipart/form-data",1,"form",3,"formGroup","ngSubmit"],["align","center",1,"form-group"],["for","input2"],["alt","avatar",1,"rounded-circle","img-fluid","imgRedonda",3,"src"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","formControlName","isbn","readonly","",1,"form-control",3,"value"],[1,"fa","fa-user","form-control-feedback"],["type","text","placeholder","title","formControlName","title",1,"form-control",3,"placeholder"],["class","form-text text-danger",4,"ngIf"],["type","date","placeholder","Date Book","formControlName","date",1,"form-control",3,"placeholder"],["type","text","placeholder","Author","formControlName","author",1,"form-control",3,"placeholder"],["type","number","placeholder","price","formControlName","price",1,"form-control",3,"placeholder"],["type","number","placeholder","Stock","formControlName","stock",1,"form-control",3,"placeholder"],["name","opcionSeleccionado","formControlName","opcionSeleccionado"],[3,"value",4,"ngFor","ngForOf"],["type","file","placeholder","Photo","formControlName","fotoPerfil","name","fotoPerfil",1,"form-control",3,"change"],[1,"fa","fa-lock","form-control-feedback"],["align","right"],["type","submit",1,"btn","btn-primary","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"card-body","text-center"],["action","POST","method","post",3,"formGroup","ngSubmit"],["name","opcionSeleccionado","formControlName","libreria"],["type","submit",1,"btn","btn-primary"],["class","card-body text-center",4,"ngIf"],[1,"form-text","text-danger"],[3,"value"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),t._uU(7,"Update book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return o.saveUpdate()}),t.TgZ(9,"div",7),t._UZ(10,"label",8)(11,"img",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",2)(14,"div",11)(15,"p",12),t._uU(16,"Isbn"),t.qZA()(),t.TgZ(17,"div",13),t._UZ(18,"input",14)(19,"i",15),t.qZA()(),t._UZ(20,"hr"),t.TgZ(21,"div",2)(22,"div",11)(23,"p",12),t._uU(24,"T\xedtulo:"),t.qZA()(),t.TgZ(25,"div",13),t._UZ(26,"input",16)(27,"i",15),t.YNc(28,rt,2,0,"span",17),t.qZA()(),t._UZ(29,"hr"),t.TgZ(30,"div",2)(31,"div",11)(32,"p",12),t._uU(33,"Fecha :"),t.qZA()(),t.TgZ(34,"div",13),t._UZ(35,"input",18)(36,"i",15),t.YNc(37,at,2,0,"span",17),t.qZA()(),t._UZ(38,"hr"),t.TgZ(39,"div",2)(40,"div",11)(41,"p",12),t._uU(42,"author:"),t.qZA()(),t.TgZ(43,"div",13),t._UZ(44,"input",19)(45,"i",15),t.YNc(46,st,2,0,"span",17),t.qZA()(),t._UZ(47,"hr"),t.TgZ(48,"div",2)(49,"div",11)(50,"p",12),t._uU(51,"Price:"),t.qZA()(),t.TgZ(52,"div",13),t._UZ(53,"input",20)(54,"i",15),t.YNc(55,lt,2,0,"span",17),t.qZA()(),t._UZ(56,"hr"),t.TgZ(57,"div",2)(58,"div",11)(59,"p",12),t._uU(60,"Stock:"),t.qZA()(),t.TgZ(61,"div",13),t._UZ(62,"input",21)(63,"i",15),t.YNc(64,ct,2,0,"span",17),t.qZA(),t._UZ(65,"hr"),t.TgZ(66,"div",2)(67,"div",11)(68,"p",12),t._uU(69,"Category:"),t.qZA()(),t.TgZ(70,"div",13)(71,"select",22),t.YNc(72,dt,2,2,"option",23),t.qZA()()(),t._UZ(73,"hr"),t.TgZ(74,"div",2)(75,"div",11)(76,"p",12),t._uU(77,"Picture:"),t.qZA()(),t.TgZ(78,"div",13)(79,"input",24),t.NdJ("change",function(a){return o.onFileChange(a)}),t.qZA(),t._UZ(80,"i",25),t.qZA()(),t.TgZ(81,"div",26)(82,"button",27),t._uU(83,"Update Book"),t.qZA(),t.TgZ(84,"button",28),t._uU(85,"Back"),t.qZA()()()()(),t.TgZ(86,"div",4)(87,"div",29)(88,"div",29)(89,"h4"),t._uU(90,"A\xf1adir librerias:"),t.qZA(),t.TgZ(91,"h6"),t._uU(92,"A\xf1ade librerias fisicas al libro"),t.qZA(),t.TgZ(93,"form",30),t.NdJ("ngSubmit",function(){return o.addBookshop()}),t.TgZ(94,"div",13)(95,"select",31),t.YNc(96,pt,2,2,"option",23),t.qZA()(),t._UZ(97,"br"),t.TgZ(98,"button",32),t._uU(99,"Add Bookshop"),t.qZA()()()()(),t.TgZ(100,"div",4)(101,"div",29),t.YNc(102,mt,12,2,"div",33),t.qZA()()()()()()(),t._UZ(103,"app-footer")),2&e&&(t.xp6(8),t.Q6J("formGroup",o.myForm),t.xp6(3),t.s9C("src",o.book.img,t.LSH),t.xp6(7),t.Q6J("value",o.book.isbn),t.xp6(8),t.Q6J("placeholder",o.book.title),t.xp6(2),t.Q6J("ngIf",o.isValidField("title")),t.xp6(7),t.Q6J("placeholder",o.book.dateBook),t.xp6(2),t.Q6J("ngIf",o.isValidField("date")),t.xp6(7),t.Q6J("placeholder",o.book.author),t.xp6(2),t.Q6J("ngIf",o.isValidField("author")),t.xp6(7),t.Q6J("placeholder",o.book.price),t.xp6(2),t.Q6J("ngIf",o.isValidField("price")),t.xp6(7),t.Q6J("placeholder",o.book.stock),t.xp6(2),t.Q6J("ngIf",o.isValidField("stock")),t.xp6(8),t.Q6J("ngForOf",o.categories),t.xp6(10),t.Q6J("disabled",o.myForm.invalid),t.xp6(2),t.Q6J("routerLink",t.DdM(19,ht)),t.xp6(9),t.Q6J("formGroup",o.bookshopForm),t.xp6(3),t.Q6J("ngForOf",o.Bookshop),t.xp6(6),t.Q6J("ngIf",o.book.listAvaible&&o.book.listAvaible.length>0))},dependencies:[p.sg,p.O5,b.S,f.c,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,l.rH,l.Od,n.sg,n.u],styles:["#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}.imgRedonda[_ngcontent-%COMP%]{width:120px;height:125px;border-radius:100px}.form-container[_ngcontent-%COMP%]{white-space:nowrap}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;width:48%;margin-right:2%}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]:last-child{margin-right:0}"]});var x=s(6752);function gt(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.addToCart(a))}),t.O4$(),t.TgZ(1,"svg",14),t._UZ(2,"path",15),t.qZA(),t._uU(3," \xa0 Add to Cart\xa0"),t.qZA()}}function bt(i,e){if(1&i&&(t.O4$(),t.kcU(),t.TgZ(0,"div",7),t._UZ(1,"img",8),t.TgZ(2,"div",9)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"label")(6,"b"),t._uU(7,"Isbn:"),t.qZA()(),t.TgZ(8,"p",11),t._uU(9),t.qZA(),t.TgZ(10,"label")(11,"b"),t._uU(12,"Date book:"),t.qZA()(),t.TgZ(13,"p",11),t._uU(14),t.qZA(),t.TgZ(15,"label")(16,"b"),t._uU(17,"Price:"),t.qZA()(),t.TgZ(18,"p",11),t._uU(19),t.qZA(),t.TgZ(20,"label")(21,"b"),t._uU(22,"Stock:"),t.qZA()(),t.TgZ(23,"p",11),t._uU(24),t.qZA(),t._UZ(25,"br"),t.YNc(26,gt,4,0,"button",12),t.qZA()()),2&i){const o=e.$implicit,r=t.oxw(2);t.xp6(1),t.s9C("src",o.img,t.LSH),t.xp6(3),t.Oqu(o.title),t.xp6(5),t.Oqu(o.isbn),t.xp6(5),t.Oqu(o.dateBook),t.xp6(5),t.Oqu(o.price),t.xp6(5),t.Oqu(o.stock),t.xp6(2),t.Q6J("ngIf",0!=o.stock&&0==r.isAdmin&&null!=r.jwt)}}const J=function(){return["/category/list"]};function ft(i,e){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2)(2,"button",3),t.O4$(),t.TgZ(3,"svg",4),t._UZ(4,"path",5),t.qZA(),t._uU(5,"Back"),t.qZA()(),t.YNc(6,bt,27,7,"div",6),t.qZA()),2&i){const o=t.oxw();t.xp6(2),t.Q6J("routerLink",t.DdM(2,J)),t.xp6(4),t.Q6J("ngForOf",o.books)}}function _t(i,e){1&i&&(t.TgZ(0,"div",1)(1,"h4"),t._uU(2,"We don't have books of that category"),t.qZA(),t.TgZ(3,"div",16)(4,"button",3),t.O4$(),t.TgZ(5,"svg",4),t._UZ(6,"path",5),t.qZA(),t._uU(7,"\xa0Back"),t.qZA()()()),2&i&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,J)))}class A{constructor(e,o,r,a,d){this.route=e,this.servicio=o,this.router=r,this.authSer=a,this.shopping=d,this.books=[],this.isAdmin=!1,this.jwt=null,this.username=localStorage.getItem("username"),this.addedFav=!1}ngOnInit(){this.servicio.getBooksByCat(this.route.snapshot.params.id).subscribe({next:o=>{this.books=o,this.jwt=localStorage.getItem("jwt"),this.jwt&&(this.isAdmin=this.authSer.isUserAdmin(this.jwt))},error:o=>{}})}addToCart(e){this.shopping.agregarAlCarrito(e),window.sessionStorage.setItem("carrito",JSON.stringify(this.shopping.books)),c().fire({icon:"success",title:"Art\xedculo a\xf1adido",text:"Art\xedculo a\xf1adido"})}addToFavorite(e){this.username=localStorage.getItem("username"),null!=this.username&&this.servicio.addToFavoriteBook(e,this.username).subscribe({next:o=>{this.addedFav=!0,c().fire({icon:"success",title:"Favorite add",text:"\xa1Favorite added!"}),this.router.navigate(["/favorites/list"])},error:o=>{c().fire({icon:"error",title:"Oops...",text:"Favorito ya esta a\xf1adido!"}),this.router.navigate(["/favorites/list"])}})}}A.\u0275fac=function(e){return new(e||A)(t.Y36(l.gz),t.Y36(g.y),t.Y36(l.F0),t.Y36(I.e),t.Y36(w.F))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-list-by-cat"]],decls:4,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"espacio"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle-fill"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],["class","card cartas","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"card","cartas",2,"width","18rem"],["alt","imagen_Card",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["pButton","","class","btn btn-danger botonAmarillo text-white ","href","#",3,"click",4,"ngIf"],["pButton","","href","#",1,"btn","btn-danger","botonAmarillo","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cart-check-fill"],["d","M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1.646-7.646-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8 8.293l2.646-2.647a.5.5 0 0 1 .708.708z"],[1,"col-md-6","espaciado"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar"),t.YNc(1,ft,7,3,"div",0),t.YNc(2,_t,8,2,"div",0),t._UZ(3,"app-footer")),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=o.books.length),t.xp6(1),t.Q6J("ngIf",0==o.books.length))},dependencies:[p.sg,p.O5,b.S,f.c,U.Hq,l.rH,l.Od],styles:[".espacio[_ngcontent-%COMP%]{margin-top:1em;margin-left:1em}.espaciado[_ngcontent-%COMP%]{padding:2em}"]});const vt=[{path:"",children:[{path:"addBook",canActivate:[x.A],component:_},{path:"deleteBook/:id",canActivate:[x.A],component:v},{path:"list",component:Z},{path:"updateBook/:id",canActivate:[x.A],component:k},{path:"listByCat/:id",component:A},{path:"**",redirectTo:"books"}]}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[l.Bz.forChild(vt)]});var Zt=s(4466),L=s(529),kt=s(1997),At=s(1035),Tt=s(2909);class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({providers:[{provide:L.TP,useClass:At.e,multi:!0}],imports:[p.ez,m,Zt.m,T.U$,U.hJ,kt.U,L.JF,Tt.kW,l.Bz,O.j,n.UX,n.u5]})}}]);